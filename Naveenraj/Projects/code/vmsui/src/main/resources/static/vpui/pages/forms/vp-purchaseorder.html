<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>Batch2-Vendor Portal</title>
    <!-- Favicon-->
    <link rel="icon" href="../../favicon.ico" type="image/x-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

    <!-- Bootstrap Core Css -->
    <link href="../../plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="../../plugins/node-waves/waves.css" rel="stylesheet" />

    <!-- Animation Css -->
    <link href="../../plugins/animate-css/animate.css" rel="stylesheet" />

    <!-- Sweet Alert Css -->
    <link href="../../plugins/sweetalert/sweetalert.css" rel="stylesheet" />

    <!-- Custom Css -->
    <link href="../../css/style.css" rel="stylesheet">
	
	<!-- Bootstrap Select Css -->
    <link href="../../plugins/bootstrap-select/css/bootstrap-select.css" rel="stylesheet" />

    <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
    <link href="../../css/themes/all-themes.css" rel="stylesheet" />
</head>

<body class="theme-red">
    <!-- Page Loader -->
    <div class="page-loader-wrapper">
        <div class="loader">
            <div class="preloader">
                <div class="spinner-layer pl-red">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
            <p>Please wait...</p>
        </div>
    </div>
    <!-- #END# Page Loader -->
    <!-- Overlay For Sidebars -->
    <div class="overlay"></div>
    <!-- #END# Overlay For Sidebars -->
	
	 

    <!-- Top Bar -->
    <nav class="navbar" >
        <div class="container-fluid">
           
			<div class="navbar-header">
                <a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false"></a>
                <a href="javascript:void(0);" class="bars"></a>
                 <a class="navbar-brand" href="#">SURGE VENDOR PORTAL</a>
				</div>

              

       
		       <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-brand navbar-right">

                    <li class="dropdown">
					
						<div id="dashBoardButtonDiv" style="display: none;">
							  
								<button type="button" id="vmsDashBoardButton" class="btn bg-blue waves-effect" >VMS Dashboard</button>
							  
							  
						</div>
                          
						  <!-- <div id="userNameDisplayDiv"  class="navbar-brand" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Welcome <label id="vendorRepName">  Murali.....</label>
						</div>-->

						
                       
                    </li>
                    <!-- #END# Tasks -->
                    
                </ul>

            </div>
		 
		
    </nav>
	
	
	<section>
        <!-- Left Sidebar -->
        <aside id="leftsidebar" class="sidebar">
            <!-- User Info -->
           
            <!-- #User Info -->
            <!-- Menu -->
            <div class="menu">
                <ul class="list"  style="background-color:#20425b;" >
                    
                    <li>
                        <a href="#">
                            <i class="material-icons">home</i>
                           
                        </a>
						
                    </li>
                    <li>
                        <a href="#">
                            <i class="material-icons">format_list_bulleted</i>
                            
                        </a>
						<!-- <p style="text-align:center;font-size:13px;color:white">
                
               <strong>My Tasks</strong>
              </p> -->
                    </li>
                    <li>
                        <a href="#">
                            <i class="material-icons">history_toggle_off</i>
                            
                        </a>
						
                    </li>
					 <li>
                        <a href="#">
                            <i class="material-icons">people</i>
                            
                        </a>
						
                    </li>
					 <li>
                        <a href="#">
                            <i class="material-icons">admin_panel_settings</i>
                            
                        </a>
						
                    </li>
     
                </ul>
            </div>
            
        </aside>
        <!-- #END# Left Sidebar -->
        <!-- Right Sidebar -->
 
        <!-- #END# Right Sidebar -->
    </section>
	
	
	
    <!-- #Top Bar -->
  
            <!-- User Info -->
           
            <!-- #User Info -->
            <!-- Menu -->
          
            <!-- #Menu -->
            <!-- Footer -->
            
            <!-- #Footer -->
                   <div class="modal fade" id="largeModal" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="largeModalLabel">SAVED DOCUMENTS</h4>
                        </div>
                        <div class="modal-body">
                                        <!-- Basic Table -->
            <div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        
                               <div class="body table-responsive">
                            <table class="table table-hover" id="docDisplaytable" >
                                <thead>
                                    <tr>
                                        
									<!--<th>DOCUMENT NAME</th>-->
                                        <th>FILE NAME</th>
										<th>FILE DOMAIN</th>
                                        <th>ACTION</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--<tr>
                                        <th scope="row">1</th>
                                        <td>DOC 1</td>
                                        <td>LINK</td>
                                        <td>
											<button type="button" class="btn btn-danger waves-effect">DELETE</button>
										</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">2</th>
                                        <td>DOC 2</td>
                                        <td>LINK</td>
                                        <td>
											<button type="button" class="btn btn-danger waves-effect">DELETE</button>
										</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">3</th>
                                        <td>DOC 3</td>
                                        <td>LINK</td>
                                        <td>
											<button type="button" class="btn btn-danger waves-effect">DELETE</button>
										</td>
                                    </tr>-->
                                  
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
                        </div>
                        <div class="modal-footer">
						 <button type="button" class="btn bg-blue waves-effect">SAVE CHANGES</button>
                          <button type="button" class="btn bg-blue-grey waves-effect" data-dismiss="modal">CLOSE</button>
                           
                        </div>
                    </div>
                </div>
            </div>

    <section >
        <div class="container-fluid">
                      <div class="block-header">
                <h2>
                    PO Submission
                   
                </h2>
            </div>
<div class="alert bg-pink  alert-dismissible" role="alert" id="successalert" style="display: none;">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                                Vendor Company Data Saved Successfully...Our Customer care executive will contact you soon...
</div>
            <!-- Basic Example | Horizontal Layout -->
            <div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                           
                           
                        </div>
                        <div class="body">
                            <form role="form" id="vmspoForm">
                            <div id="wizard_vertical">
                                <h2>PO Section</h2>
                                <section>
                                    <br>
									<h2 class="card-inside-title">Company Name</h2>
                             <div class="row clearfix">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="form-line">
                                            <input type="text" class="form-control" id="CompanyNAME" placeholder="CompanyNAME" />
                                        </div>
                                    </div>
                                </div>
							</div>
							
							
									<h2 class="card-inside-title">PO Item1</h2>
                             <div class="row clearfix">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="form-line">
                                            <input type="text" class="form-control" id="PoItem1" placeholder="PO Item1" />
                                        </div>
                                    </div>
                                </div>
							</div>
							
							
							
									<h2 class="card-inside-title">Po Item2</h2>
                             <div class="row clearfix">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="form-line">
                                            <input type="text" class="form-control" id="PoItem2" placeholder="PO Item2" />
                                        </div>
                                    </div>
                                </div>
							</div>
							
							
									<h2 class="card-inside-title">Po Item3</h2>
                             <div class="row clearfix">
                                <div class="col-sm-12">
                                    <div class="form-group">
                                        <div class="form-line">
                                            <input type="text" class="form-control" id="PoItem3" placeholder="PO Item3" />
                                        </div>
                                    </div>
                                </div>
							</div>
								
								
							
						  
						  
								
						

								<div class="row clearfix">
									<div class="col-sm-8">
										
									</div>
									<div class="col-sm-4">
									
									 <button type="button" class="btn bg-blue waves-effect"  
									 onclick="submitPurchaseOrder()">Submit Purchase Order</button>
									
										
									
									</div>
								</div>
							
								
								
                                </section>

                                
								
								
								
								
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<div class="modal fade in" id="mdModal" tabindex="-1" role="dialog" style="display: none;">
                <div class="modal-dialog" role="document">
                    <div class="modal-content modal-col-light-blue">
                        <div class="modal-header">
                            <h4 class="modal-title" id="defaultModalLabel">Info:</h4>
                        </div>
                        <div class="modal-body">
                             Data Saved Successfully...
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-link waves-effect" data-dismiss="modal" onClick="reloadCustWindow()" >CLOSE</button>
                        </div>
                    </div>
                </div>
            </div>
            

    </section>



    <!-- Jquery Core Js -->
    <script src="../../plugins/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core Js -->
    <script src="../../plugins/bootstrap/js/bootstrap.js"></script>

    <!-- Select Plugin Js -->
    <!--<script src="../../plugins/bootstrap-select/js/bootstrap-select.js"></script>  -->

        <!-- Bootstrap Notify Plugin Js -->
    <script src="../../plugins/bootstrap-notify/bootstrap-notify.js"></script>

    <!-- Slimscroll Plugin Js -->
    <script src="../../plugins/jquery-slimscroll/jquery.slimscroll.js"></script>

    <!-- Jquery Validation Plugin Css -->
    <script src="../../plugins/jquery-validation/jquery.validate.js"></script>

    <!-- JQuery Steps Plugin Js -->
    <script src="../../plugins/jquery-steps/jquery.steps.js"></script>

    <!-- Sweet Alert Plugin Js -->
    <script src="../../plugins/sweetalert/sweetalert.min.js"></script>

    <!-- Waves Effect Plugin Js -->
    <script src="../../plugins/node-waves/waves.js"></script>

    <!-- Custom Js -->
    <script src="../../js/admin.js"></script>
    <script src="../../js/pages/forms/form-wizard.js"></script>
    <script src="../../js/pages/forms/vendorportal.js"></script>
	<script src="../../js/pages/ui/modals.js"></script>
    <script src="../../js/pages/ui/notifications.js"></script>
	

    <!-- Demo Js -->
    <script src="../../js/demo.js"></script>


<script type="text/javascript">
	
	function submitPurchaseOrder(){
			alert("submitPurchaseOrder..same html");
        
		var companyName = $('#CompanyNAME').val();
       alert(companyName);
	   var PoItem1 = $('#PoItem1').val();
       alert(PoItem1);
	   var PoItem2 = $('#PoItem2').val();
       alert(PoItem2);
	   var PoItem3= $('#PoItem3').val();
       alert(PoItem3);
	   
	   
	   	var PoItemData = {
					"vendorName": companyName,
					"item1": PoItem1,
					"item2": PoItem2,
                    "item3":PoItem3,
					"poStatus":"NEW"
				};
				var jsonStr = JSON.stringify(PoItemData);
				alert(jsonStr);
				
				var vmspoForm = $('#vmspoForm')[0];
                var data = new FormData(vmspoForm);
				
				data.append('action', new Blob([JSON.stringify(PoItemData)],
				{
                 type: "application/json"
                }));
				
				  var  restPoItemUrl = "http://localhost:8081/vendorcompanyreg/purchaseOrderData";
				  
				  
				   $.ajax({
					url: restPoItemUrl ,
					type: "POST",
					data: data,
					enctype: 'multipart/form-data',
					processData: false,
					contentType: false,
					cache: false,
					success: function (res) {
                        console.log('SUCCESS');
						console.log(res);
						alert("success");
                      
					},
					error: function (err) {
					    alert('ERROR Please Investigate...');
						console.error(err);
					}
				});

    }
	
    function getBasicData(){

        var companyName = $('#companyName').val();
        var companyName = $('#companyName').val();
        var companyWebsite = $('#companyWebsite').val();
        var companyPhone = $('#companyPhone').val();
        var companyFax = $('#companyFax').val();


        var addrFirstLineB = $('#addrFirstLineB').val();
        var addrSecondLineB = $('#addrSecondLineB').val();
        var basiccountryselect = $('#basiccountryselect').val();
        var basicstateselect = $('#basicstateselect').val();
        var basiccityselect = $('#basiccityselect').val();
        var basiczipselect = $('#basiczipselect').val();


        var firstName = $('#firstName').val();
        var lastName = $('#lastName').val();
        var email = $('#email').val();
        var mobileNumber = $('#mobileNumber').val();

				var address = [
            		{
                		"addrFirstLine": addrFirstLineB,
                		"addrSecondLine": addrSecondLineB,
                		"country": basiccountryselect,
                		"state": basicstateselect,
                		"city": basiccityselect,
                		"zipCode": basiczipselect,
                		"addrType":"corpaddr"
            	    }

				];
                var vendor = [
					{
						"firstName": firstName,
						"lastName": lastName,
						"email": email,
						"mobileNumber": mobileNumber
					}
				];
                var fileNameDomainTypeMap =
					{
                        "VMSCapability1.0.pdf":"CAPABILITY",
                        "VMSLine1.0.pdf":"LINE"
					};


				var vendorCompanyData = {
					"companyName": companyName,
					"companyWebsite": companyWebsite,
					"companyTurnOver":  $('#companyTurnOver').val(),
					"companyPhone": companyPhone,
					"companyFax": companyFax,
                        "taxIdNumber":  $('#taxIdNumber').val(),
					"address":address,
                    "fileNameDomainTypeMap":fileNameDomainTypeMap,
                    "vendor":vendor
				};

				//console.log(vendorCompanyData);
				var jsonStr = JSON.stringify(vendorCompanyData);
				console.log(jsonStr);

                var vmsRegForm = $('#VmsRegForm')[0];
                var data = new FormData(vmsRegForm);

				data.append('action', new Blob([JSON.stringify(vendorCompanyData)],
				{
                    type: "application/json"
                }));

                var  restVendorRegBasicDataUrl = "http://localhost:8081/vendorcompanyreg/basic";
				

                $.ajax({
					url: restVendorRegBasicDataUrl ,
					type: "POST",
					data: data,
					enctype: 'multipart/form-data',
					processData: false,
					contentType: false,
					cache: false,
					success: function (res) {
                        console.log('SUCCESS');
						console.log(res);
                        //alert("Data Saved...");
                        //window.location.href='vendorcompanylist.html';
					},
					error: function (err) {
					    console.log('ERROR Please Investigate...');
						console.error(err);
					}
				});


    }

    	var helpers =
				{
					buildDropdown: function(result, dropdown, emptyMessage, domain)
					{

                        dropdown.html('');
                        dropdown.append('<option value="">' + emptyMessage + '</option>');
						if(result != '')
						{
							var len = result.length;
						   for( var i = 0; i<len; i++){
						       if(domain == 'country'){

						            var id = result[i].countryCode;
							        var name = result[i].countryName;

							        dropdown.append("<option value='"+id+"'>"+name+"</option>");

                                    /*$('#basiccountryselect').append(
                                            $('<option></option>').val(id).html(name)
                                    ); */




						       }else if(domain == 'state'){
                                    var id = result[i].stateCode;
							        var name = result[i].stateName;
                                    console.log("State ID: "+id);    console.log(name);
							        dropdown.append("<option value='"+id+"'>"+name+"</option>");

						       }else if(domain == 'city'){
                                    var id = result[i].cityCode;
							        var name = result[i].cityName;
							        dropdown.append("<option value='"+id+"'>"+name+"</option>");
						       }
                               else if(domain == 'zip'){
                                    var id = result[i].zipCode;
							        var name = result[i].zipCodeName;
							        dropdown.append("<option value='"+id+"'>"+name+"</option>");
						       }

							}
						}
					},

                    buildCountry: function(dropdownname)
                    {
                        console.log("...: "+dropdownname);
                        var countryValUrl = "http://localhost:8081/country";
                		$.ajax({
                					type: "GET",
                					contentType: "application/json; charset=utf-8",
                					url: countryValUrl,
                					cache: false,
                					success: function(data) {
                					    console.log(data)
                						helpers.buildDropdown( data,   dropdownname,  'Select Country', 'country' );
                					},
                					error: function(err) {
                						console.log("ERROR");
                					}
                				});


                    },
                    buildState: function(changeDDName, setDDName)
                    {

                        var countrySelect = changeDDName.val();
                        console.log("countrySelect:"+countrySelect);
                        setDDName.find("option:gt(0)").remove();
                        setDDName.find("option:first").text("Loading...");
                        var url = 'http://localhost:8081/state/'+countrySelect;
                        console.log("url:"+url);
                        $.getJSON(url, function(json) {
            				console.log(json);
                            helpers.buildDropdown( json,   setDDName,  'Select State', 'state' );

            			});
                    },

                    buildCity: function(changeDDName, setDDName)
                    {

                        var stateSelect = changeDDName.val();
                       /* if(stateSelect == 'TN'){
                        alert(stateSelect);
                              $('#postateselect').val(stateSelect).attr("selected", "selected");
                        }  */

                        console.log("stateSelect:"+stateSelect);
                        setDDName.find("option:gt(0)").remove();
                        setDDName.find("option:first").text("Loading...");
                        var url = 'http://localhost:8081/city/'+stateSelect;
                        console.log("url:"+url);
                        $.getJSON(url, function(json) {
            				console.log(json);
                            helpers.buildDropdown( json,   setDDName,  'Select City', 'city' );

            			});
                    },

                    buildZip: function(changeDDName, setDDName)
                    {

                        var citySelect = changeDDName.val();
                        console.log("citySelect:"+citySelect);
                        setDDName.find("option:gt(0)").remove();
                        setDDName.find("option:first").text("Loading...");
                        var url = 'http://localhost:8081/zip/'+citySelect;
                        console.log("url:"+url);
                        $.getJSON(url, function(json) {
            				console.log(json);
                            helpers.buildDropdown( json,   setDDName,  'Select an option', 'zip' );

            			});
                    }

				}



</script>

</body>

</html>